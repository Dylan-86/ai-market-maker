<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  <title>AI Market Maker</title>
  <link rel="stylesheet" href="styles.css">
</head>
<body>
  <div class="container">
    <h1>AI Market Maker</h1>

    <label for="userInput">Enter your idea:</label><br>
    <input type="text" id="userInput" name="userInput"><br><br>
    <button id="btnGenerate">Generate</button><br><br>

    <div class="output-section">
      <strong>Generated Text:</strong>
      <pre id="generatedText"></pre>
    </div>

    <div class="output-section">
      <strong>Description:</strong>
      <p id="description"></p>
    </div>

    <div class="output-section">
      <strong>URL:</strong>
      <p id="url"></p>
    </div>
  </div>

  <script>
    async function getAIResponse() {
      const userInput = document.getElementById("userInput").value.trim();
      if (!userInput) return;

      try {
        const res = await fetch("/generate_market", {
          method: "POST",
          headers: { "Content-Type": "application/json" },
          body: JSON.stringify({ user_input: userInput })
        });
        const data = await res.json();

        if (!res.ok) {
          console.error(data);
          alert(data.error || "Server error");
          return;
        }

        document.getElementById("generatedText").textContent = data.generated_text || "";
        document.getElementById("description").textContent = data.description || "";
        document.getElementById("url").textContent = data.url || "";
      } catch (e) {
        console.error(e);
        alert("Network error");
      }
    }

    document.getElementById("btnGenerate").addEventListener("click", getAIResponse);
  </script>
</body>
</html>
